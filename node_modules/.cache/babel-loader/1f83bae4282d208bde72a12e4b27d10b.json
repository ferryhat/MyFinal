{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,useRef}from'react';import{NavLink}from'react-router-dom';import{AdminContext}from'../../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TotalIncomeChart=function TotalIncomeChart(){var _useContext=useContext(AdminContext),adminState=_useContext.adminState,dispatchadmin=_useContext.dispatchadmin;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),income=_useState2[0],setIncome=_useState2[1];var canvasRef=useRef(null);var getrentcarincome=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/getrentcarincome',{method:'GET'});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;setIncome(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function getrentcarincome(){return _ref.apply(this,arguments);};}();useEffect(function(){getrentcarincome();},[]);useEffect(function(){if(canvasRef.current&&income.length>0){var ctx=canvasRef.current.getContext('2d');var labels=income.map(function(item){return item.soldItems.map(function(soldItem){return\"\".concat(soldItem.brand,\" \").concat(soldItem.model);});});var data=income.map(function(item){return item.soldItems.map(function(soldItem){return soldItem.totalIncome;});});// Chart customization and drawing logic here\n// You can use the ctx variable to interact with the canvas and draw the chart\n// Example: Draw a bar chart\nvar chart=new window.Chart(ctx,{type:'bar',data:{labels:labels.flat(),datasets:[{label:'Total Income',data:data.flat(),backgroundColor:'rgba(130, 2, 99)',borderColor:'rgba(217, 3, 104)',borderWidth:1}]},options:{responsive:true,scales:{y:{beginAtZero:true}}}});// Cleanup the chart when the component unmounts\nreturn function(){chart.destroy();};}},[income]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Total Income by Car\"})}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef})]});};export default TotalIncomeChart;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","NavLink","AdminContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","TotalIncomeChart","_useContext","adminState","dispatchadmin","_useState","_useState2","_slicedToArray","income","setIncome","canvasRef","getrentcarincome","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","method","sent","json","t0","console","log","stop","apply","arguments","current","length","ctx","getContext","labels","map","item","soldItems","soldItem","concat","brand","model","totalIncome","chart","window","Chart","type","flat","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","scales","y","beginAtZero","destroy","children","className","ref"],"sources":["C:/Users/FERIEL/Desktop/client/src/components/dashboardComponents/Chartotalincome.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { AdminContext } from '../../App';\r\n\r\nconst TotalIncomeChart = () => {\r\n    const { adminState, dispatchadmin } = useContext(AdminContext);\r\n\r\n    const [income, setIncome] = useState([]);\r\n\r\n    const canvasRef = useRef(null);\r\n\r\n    const getrentcarincome = async () => {\r\n        try {\r\n            const res = await fetch('/getrentcarincome', {\r\n                method: 'GET',\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            setIncome(data);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getrentcarincome();\r\n    }, []);\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        if (canvasRef.current && income.length > 0) {\r\n            const ctx = canvasRef.current.getContext('2d');\r\n            const labels = income.map((item) =>\r\n                item.soldItems.map((soldItem) => `${soldItem.brand} ${soldItem.model}`)\r\n            );\r\n            const data = income.map((item) =>\r\n                item.soldItems.map((soldItem) => soldItem.totalIncome)\r\n            );\r\n\r\n            // Chart customization and drawing logic here\r\n            // You can use the ctx variable to interact with the canvas and draw the chart\r\n\r\n            // Example: Draw a bar chart\r\n            const chart = new window.Chart(ctx, {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: labels.flat(),\r\n                    datasets: [\r\n                        {\r\n                            label: 'Total Income',\r\n                            data: data.flat(),\r\n                            backgroundColor: 'rgba(130, 2, 99)',\r\n                            borderColor: 'rgba(217, 3, 104)',\r\n                            borderWidth: 1,\r\n                        },\r\n                    ],\r\n                },\r\n                options: {\r\n                    responsive: true,\r\n                    scales: {\r\n                        y: {\r\n                            beginAtZero: true,\r\n                        },\r\n                    },\r\n                },\r\n            });\r\n\r\n            // Cleanup the chart when the component unmounts\r\n            return () => {\r\n                chart.destroy();\r\n            };\r\n        }\r\n    }, [income]);\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n            <h1 className=\"heading\">\r\n                <span>Total Income by Car</span>\r\n            </h1>\r\n            <canvas ref={canvasRef}></canvas>\r\n\r\n\r\n\r\n        </>\r\n    );\r\n};\r\n\r\nexport default TotalIncomeChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}