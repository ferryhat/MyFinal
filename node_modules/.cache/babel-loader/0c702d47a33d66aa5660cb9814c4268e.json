{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FERIEL\\\\Desktop\\\\CarRent\\\\client\\\\src\\\\components\\\\dashboardComponents\\\\Statistics.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext, useRef } from 'react';\nimport { NavLink } from 'react-router-dom';\nimport { AdminContext } from '../../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Statistics = () => {\n  _s();\n  const {\n    adminState,\n    dispatchadmin\n  } = useContext(AdminContext);\n  const [income, setIncome] = useState([]);\n  const [carCount, setCarCount] = useState({});\n  const chartRef = useRef(null); // Reference to the chart canvas element\n\n  const getrentcarincome = async () => {\n    try {\n      const res = await fetch('/getrentcarincome', {\n        method: 'GET'\n      });\n      const data = await res.json();\n      setIncome(data);\n\n      // Calculate the count for each car\n      const count = {};\n      data.forEach(item => {\n        item.soldItems.forEach(soldItem => {\n          const {\n            brand,\n            model\n          } = soldItem;\n          const carKey = `${brand}-${model}`;\n          count[carKey] = count[carKey] ? count[carKey] + 1 : 1;\n        });\n      });\n      setCarCount(count);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  useEffect(() => {\n    getrentcarincome();\n  }, []);\n  useEffect(() => {\n    if (chartRef.current) {\n      const labels = Object.keys(carCount);\n      const data = Object.values(carCount);\n      const ctx = chartRef.current.getContext('2d');\n      new Chart(ctx, {\n        type: 'bar',\n        data: {\n          labels,\n          datasets: [{\n            label: 'Repeat Count',\n            data,\n            backgroundColor: 'rgba(75, 192, 192, 0.6)'\n          }]\n        },\n        options: {\n          responsive: true,\n          scales: {\n            y: {\n              beginAtZero: true,\n              precision: 0\n            }\n          }\n        }\n      });\n    }\n  }, [carCount]);\n  const Loginbutton = () => {\n    // ...\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"home-section\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"salecartableDiv\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"heading\",\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"Rented Cars Income Report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"salecartable\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chart-container\",\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: chartRef,\n            id: \"repeatCountChart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n};\n_s(Statistics, \"LT+gJhgdqekAcUti3OgVcPOyggU=\");\n_c = Statistics;\nexport default Statistics;\nvar _c;\n$RefreshReg$(_c, \"Statistics\");","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","NavLink","AdminContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Statistics","_s","adminState","dispatchadmin","income","setIncome","carCount","setCarCount","chartRef","getrentcarincome","res","fetch","method","data","json","count","forEach","item","soldItems","soldItem","brand","model","carKey","error","console","log","current","labels","Object","keys","values","ctx","getContext","Chart","type","datasets","label","backgroundColor","options","responsive","scales","y","beginAtZero","precision","Loginbutton","children","className","fileName","_jsxFileName","lineNumber","columnNumber","ref","id","_c","$RefreshReg$"],"sources":["C:/Users/FERIEL/Desktop/CarRent/client/src/components/dashboardComponents/Statistics.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport { AdminContext } from '../../App';\r\n\r\nconst Statistics = () => {\r\n    const { adminState, dispatchadmin } = useContext(AdminContext);\r\n\r\n    const [income, setIncome] = useState([]);\r\n    const [carCount, setCarCount] = useState({});\r\n    const chartRef = useRef(null); // Reference to the chart canvas element\r\n\r\n    const getrentcarincome = async () => {\r\n        try {\r\n            const res = await fetch('/getrentcarincome', {\r\n                method: 'GET',\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            setIncome(data);\r\n\r\n            // Calculate the count for each car\r\n            const count = {};\r\n            data.forEach((item) => {\r\n                item.soldItems.forEach((soldItem) => {\r\n                    const { brand, model } = soldItem;\r\n                    const carKey = `${brand}-${model}`;\r\n                    count[carKey] = count[carKey] ? count[carKey] + 1 : 1;\r\n                });\r\n            });\r\n\r\n            setCarCount(count);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        getrentcarincome();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (chartRef.current) {\r\n            const labels = Object.keys(carCount);\r\n            const data = Object.values(carCount);\r\n\r\n            const ctx = chartRef.current.getContext('2d');\r\n            new Chart(ctx, {\r\n                type: 'bar',\r\n                data: {\r\n                    labels,\r\n                    datasets: [{\r\n                        label: 'Repeat Count',\r\n                        data,\r\n                        backgroundColor: 'rgba(75, 192, 192, 0.6)',\r\n                    }],\r\n                },\r\n                options: {\r\n                    responsive: true,\r\n                    scales: {\r\n                        y: {\r\n                            beginAtZero: true,\r\n                            precision: 0,\r\n                        },\r\n                    },\r\n                },\r\n            });\r\n        }\r\n    }, [carCount]);\r\n\r\n    const Loginbutton = () => {\r\n        // ...\r\n    };\r\n\r\n    return (\r\n        <>\r\n            {/* Sidebar and other JSX code... */}\r\n\r\n            <section className=\"home-section\">\r\n                {/* Navbar and other JSX code... */}\r\n\r\n                <div className=\"salecartableDiv\">\r\n                    <h1 className=\"heading\">\r\n                        <span>Rented Cars Income Report</span>\r\n                    </h1>\r\n\r\n                    <table className=\"salecartable\">\r\n                        {/* Table body code... */}\r\n                    </table>\r\n\r\n                    <div className=\"chart-container\">\r\n                        <canvas ref={chartRef} id=\"repeatCountChart\" />\r\n                    </div>\r\n                </div>\r\n            </section>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Statistics;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}