{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/FERIEL/Desktop/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,useRef}from'react';import{NavLink}from'react-router-dom';import{AdminContext}from'../../App';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Logstats=function Logstats(){var _useContext=useContext(AdminContext),adminState=_useContext.adminState,dispatchadmin=_useContext.dispatchadmin;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),getUsers=_useState2[0],setGetUsers=_useState2[1];var canvasRef=useRef(null);var getallusers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch('/getavailableusers',{method:'GET'});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;setGetUsers(data);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function getallusers(){return _ref.apply(this,arguments);};}();useEffect(function(){getallusers();},[]);useEffect(function(){if(canvasRef.current&&getUsers.length>0){var ctx=canvasRef.current.getContext('2d');var labels=getUsers.map(function(user){return user.name;});var data=getUsers.map(function(user){return user.tokens.length;});// Chart customization and drawing logic here\n// You can use the ctx variable to interact with the canvas and draw the chart\n// Example: Draw a bar chart\nvar chart=new window.Chart(ctx,{type:'bar',data:{labels:labels,datasets:[{label:'Logged in times',data:data,backgroundColor:'rgba(255, 27, 28)',borderColor:'rgba(0, 0, 0)',borderWidth:1}]},options:{responsive:true,scales:{y:{beginAtZero:true}}}});// Cleanup the chart when the component unmounts\nreturn function(){chart.destroy();};}},[getUsers]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"heading\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Most Logged in Users\"})}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef})]});};export default Logstats;","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","NavLink","AdminContext","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Logstats","_useContext","adminState","dispatchadmin","_useState","_useState2","_slicedToArray","getUsers","setGetUsers","canvasRef","getallusers","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","res","data","wrap","_callee$","_context","prev","next","fetch","method","sent","json","t0","console","log","stop","apply","arguments","current","length","ctx","getContext","labels","map","user","name","tokens","chart","window","Chart","type","datasets","label","backgroundColor","borderColor","borderWidth","options","responsive","scales","y","beginAtZero","destroy","children","className","ref"],"sources":["C:/Users/FERIEL/Desktop/client/src/components/dashboardComponents/LogStat.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { AdminContext } from '../../App';\r\n\r\nconst Logstats = () => {\r\n    const { adminState, dispatchadmin } = useContext(AdminContext);\r\n    const [getUsers, setGetUsers] = useState([]);\r\n\r\n    const canvasRef = useRef(null);\r\n\r\n    const getallusers = async () => {\r\n        try {\r\n            const res = await fetch('/getavailableusers', {\r\n                method: 'GET',\r\n            });\r\n\r\n            const data = await res.json();\r\n            setGetUsers(data);\r\n\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        getallusers();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (canvasRef.current && getUsers.length > 0) {\r\n            const ctx = canvasRef.current.getContext('2d');\r\n            const labels = getUsers.map((user) => user.name);\r\n            const data = getUsers.map((user) => user.tokens.length);\r\n\r\n            // Chart customization and drawing logic here\r\n            // You can use the ctx variable to interact with the canvas and draw the chart\r\n\r\n            // Example: Draw a bar chart\r\n            const chart = new window.Chart(ctx, {\r\n                type: 'bar',\r\n                data: {\r\n                    labels: labels,\r\n                    datasets: [\r\n                        {\r\n                            label: 'Logged in times',\r\n                            data: data,\r\n                            backgroundColor: 'rgba(255, 27, 28)',\r\n                            borderColor: 'rgba(0, 0, 0)',\r\n                            borderWidth: 1,\r\n                        },\r\n                    ],\r\n                },\r\n                options: {\r\n                    responsive: true,\r\n                    scales: {\r\n                        y: {\r\n                            beginAtZero: true,\r\n                        },\r\n                    },\r\n                },\r\n            });\r\n\r\n            // Cleanup the chart when the component unmounts\r\n            return () => {\r\n                chart.destroy();\r\n            };\r\n        }\r\n    }, [getUsers]);\r\n\r\n    return (\r\n        <>\r\n\r\n\r\n\r\n            <h1 className=\"heading\">\r\n                <span>Most Logged in Users</span>\r\n            </h1>\r\n\r\n            <canvas ref={canvasRef}></canvas>\r\n\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Logstats;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}