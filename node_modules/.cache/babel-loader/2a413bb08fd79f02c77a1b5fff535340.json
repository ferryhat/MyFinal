{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FERIEL\\\\Desktop\\\\CarRent\\\\client\\\\src\\\\components\\\\Bookinglist.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport { NavLink, useHistory } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport { UserContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookingList = () => {\n  _s();\n  const {\n    state\n  } = useContext(UserContext);\n  const [bookings, setBookings] = useState([]);\n  const history = useHistory();\n  useEffect(() => {\n    if (!state) {\n      Swal.fire({\n        title: 'Please sign in to track your booking request!',\n        icon: 'warning',\n        showCancelButton: true,\n        confirmButtonText: 'OK'\n      }).then(result => {\n        if (result.isConfirmed) {\n          history.push('/signin');\n        } else {\n          history.push('/');\n        }\n      });\n    }\n  }, [state, history]);\n  useEffect(() => {\n    const fetchBookings = async () => {\n      try {\n        const response = await fetch('/getStatus', {\n          headers: {\n            Authorization: `Bearer ${state.token}` // Add the user's authentication token\n          }\n        });\n\n        const data = await response.json();\n        setBookings(data.bookings);\n      } catch (error) {\n        console.error('Error fetching bookings:', error);\n      }\n    };\n    fetchBookings();\n  }, [state]);\n  const deleteBooking = async bookingId => {\n    try {\n      await fetch(`/deletemyBooking/${bookingId}`, {\n        method: 'DELETE'\n      });\n      setBookings(prevBookings => prevBookings.filter(booking => booking._id !== bookingId));\n      Swal.fire('Success', 'Booking deleted successfully', 'success');\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Booking Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, this), bookings.length > 0 ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: bookings.map((booking, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"User: \", booking.user]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Email: \", booking.email]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Phone: \", booking.phone]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Pickup Date: \", booking.pickupDate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Return Date: \", booking.returnDate]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Car: \", booking.car]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Status: \", booking.status]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-button\",\n          onClick: () => deleteBooking(booking._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No bookings found.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(BookingList, \"ACQScyXqTdk0UGV6640etBzk3h0=\", false, function () {\n  return [useHistory];\n});\n_c = BookingList;\nexport default BookingList;\nvar _c;\n$RefreshReg$(_c, \"BookingList\");","map":{"version":3,"names":["React","useState","useEffect","useContext","NavLink","useHistory","Swal","UserContext","jsxDEV","_jsxDEV","BookingList","_s","state","bookings","setBookings","history","fire","title","icon","showCancelButton","confirmButtonText","then","result","isConfirmed","push","fetchBookings","response","fetch","headers","Authorization","token","data","json","error","console","deleteBooking","bookingId","method","prevBookings","filter","booking","_id","log","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","index","user","email","phone","pickupDate","returnDate","car","status","className","onClick","_c","$RefreshReg$"],"sources":["C:/Users/FERIEL/Desktop/CarRent/client/src/components/Bookinglist.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { NavLink, useHistory } from 'react-router-dom';\r\nimport Swal from 'sweetalert2';\r\nimport { UserContext } from '../App';\r\n\r\nconst BookingList = () => {\r\n    const { state } = useContext(UserContext);\r\n    const [bookings, setBookings] = useState([]);\r\n    const history = useHistory();\r\n    useEffect(() => {\r\n        if (!state) {\r\n            Swal.fire({\r\n                title: 'Please sign in to track your booking request!',\r\n                icon: 'warning',\r\n                showCancelButton: true,\r\n                confirmButtonText: 'OK',\r\n            }).then((result) => {\r\n                if (result.isConfirmed) {\r\n                    history.push('/signin');\r\n                } else {\r\n                    history.push('/');\r\n                }\r\n            });\r\n        }\r\n    }, [state, history]);\r\n    useEffect(() => {\r\n        const fetchBookings = async () => {\r\n            try {\r\n                const response = await fetch('/getStatus', {\r\n                    headers: {\r\n                        Authorization: `Bearer ${state.token}` // Add the user's authentication token\r\n                    }\r\n                });\r\n                const data = await response.json();\r\n                setBookings(data.bookings);\r\n            } catch (error) {\r\n                console.error('Error fetching bookings:', error);\r\n            }\r\n        };\r\n\r\n        fetchBookings();\r\n    }, [state]);\r\n    const deleteBooking = async (bookingId) => {\r\n        try {\r\n            await fetch(`/deletemyBooking/${bookingId}`, {\r\n                method: 'DELETE',\r\n            });\r\n            setBookings((prevBookings) =>\r\n                prevBookings.filter((booking) => booking._id !== bookingId)\r\n            );\r\n            Swal.fire('Success', 'Booking deleted successfully', 'success');\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Booking Requests</h1>\r\n            {bookings.length > 0 ? (\r\n                <ul>\r\n                    {bookings.map((booking, index) => (\r\n                        <li key={index}>\r\n                            <p>User: {booking.user}</p>\r\n                            <p>Email: {booking.email}</p>\r\n                            <p>Phone: {booking.phone}</p>\r\n                            <p>Pickup Date: {booking.pickupDate}</p>\r\n                            <p>Return Date: {booking.returnDate}</p>\r\n                            <p>Car: {booking.car}</p>\r\n                            <p>Status: {booking.status}</p>\r\n                            <button\r\n                                className=\"delete-button\"\r\n                                onClick={() => deleteBooking(booking._id)}\r\n                            >\r\n                                Delete\r\n                            </button>\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            ) : (\r\n                <p>No bookings found.</p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default BookingList;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}